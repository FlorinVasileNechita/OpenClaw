<!DOCTYPE HTML>
<html lang="en">
<head>
    <style>
        #console {
            width: 100%;
            height: 200px;
            display: block;
            background-color: black;
            color: white;
            font-family: 'Lucida Console', Monaco, monospace;
            outline: none;
            border: none;
        }
    </style>
    <title>OpenClaw</title>
</head>
<body>
<div>
    <!-- Config's width and height will be used if canvas does not have this attributes -->
    <canvas id="canvas" width="640" height="480" oncontextmenu="e.preventDefault()" tabindex=-1></canvas>
</div>
<div>
    <button onclick="Module.canvas.requestFullscreen()">Enable Fullscreen Mode</button>
    <button onclick="Console.toggleConsole()">Debug Console</button>
</div>
<div style="display:none">
    <button onclick="Console.clear()">Clear Console</button>
    <textarea id="console" rows="8"></textarea>
</div>


<script type='text/javascript'>
    var Console = {
        elem: document.getElementById('console'),
        enabled: false,
        toggleConsole: function() {
            Console.enabled = !Console.enabled;
            Console.elem.parentNode.style.display = Console.enabled ? "block" : "none";
        },
        printToConsole: function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            console.log(text);
            Console.elem.value += text + "\n";
        },
        clear: function() {
            Console.elem.value = '';
        },
    };
</script>
<script type='text/javascript'>
    // Emscripten structure
    var Module = {
        preRun: [function () {
            // Here you can change canvas size dynamically if it's needed
        }],
        canvas: (function () {
            var canvas = document.getElementById('canvas');

            // As a default initial behavior, pop up an alert when webgl context is lost. To make your
            // application robust, you may want to override this behavior before shipping!
            // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
            canvas.addEventListener("webglcontextlost", function (e) {
                alert('WebGL context lost. You will need to reload the page.');
                e.preventDefault();
            }, false);

            return canvas;
        })(),

        // Could be removed. This code for debug build only
        print: Console.printToConsole,
        printErr: Console.printToConsole,
    };

    function loadGame() {
        var script = document.createElement("script");
        script.async = !0;
        script.type = "text/javascript";
        script.src = "openclaw.js";
        script.onerror = function (t) {
            console.error("Script Error");
            console.error(t);
        };
        var r = document.getElementsByTagName("script")[0];
        r.parentNode.insertBefore(script, r);
    }

    loadGame();
</script>
</body>
</html>